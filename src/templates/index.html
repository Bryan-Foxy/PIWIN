{% extends 'base.html' %}
{% block title%} home {% endblock %}
{% block content %}
  <div class="row">
    <div class="col-lg-6 d-flex align-items-strech">
      <div class="card w-100">
        <div class="card-body">
          <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
            <div class="mb-3 mb-sm-0">
              <h5 class="card-title fw-semibold">CPU usage in 15min</h5>
            </div>
          </div>
          <div id="chart_cpu"></div>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="row">
        <div class="col-lg-12">
          <!-- Yearly Breakup -->
          <div class="card overflow-hidden">
            <div class="card-body p-4">
              <h5 class="card-title mb-9 fw-semibold">State of network summary</h5>
              <div class="row align-items-center">
                <div class="col-12">
                  <div class="d-flex justify-content-center">
                    <div id="pie_type"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-6 d-flex align-items-stretch">
      <div class="card w-100">
        <div class="card-body p-4">
          <div class="mb-4">
            <h5 class="card-title fw-semibold">Message bgp</h5>
            <div id="msg_bgp_chart"></div>
          </div>
        
        </div>
      </div>
    </div>
    <div class="col-lg-6 d-flex align-items-stretch">
      <div class="card w-100">
        <div class="card-body p-4">
          <h5 class="card-title fw-semibold mb-4">Global activity</h5>
          <div id="activity_chart"></div>
        </div>
      </div>
    </div>
    
  </div>
  <div class="row">
    <div class="col-lg-12 d-flex align-items-strech">
      <div class="card w-100">
        <div class="card-body">
          <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
            <div class="mb-3 mb-sm-0">
              <h5 class="card-title fw-semibold">Data Overview</h5>
            </div>

          </div>
          <!--Table pandas import-->
          <div id="">
            <table id="datatablesSimple" class="table table-striped table-hover">
              <thead>
                  <tr>
                      {% for col in data.columns %}
                          <th>{{ col }}</th>
                      {% endfor %}
                  </tr>
              </thead>
              <tbody>
              {% for key,value in data.tail(10).iterrows() %}
                   <tr>
                       {% for col in data.columns %}
                       <td>{{ value[col] }}</td>
                       {% endfor %}
                  </tr>
              {% endfor %}
              </tbody>
          </table>
          </div>
          <!--End table pandas import-->
        </div>
      </div>
    </div>
  </div>
  </div>
{% endblock %}

{% block script %}
<script>
  $(document).ready(function() {
      $('#datatablesSimple').DataTable();
  });

  var graphs1 = {{ fig_cpu15 | safe}};
  Plotly.react("chart_cpu", graphs1,{});

  var graphs2 = {{ fig_type | safe}};
  Plotly.react("pie_type", graphs2,{});

  var graphs3 = {{ fig_activity | safe}};
  Plotly.react("activity_chart", graphs3,{});

  var graphs4 = {{ msg_bgp | safe}};
  Plotly.react("msg_bgp_chart", graphs4,{});


  
</script>

{% endblock %}